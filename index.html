<!doctype html>
<html lang="en">

<head>
    <title>Kollosal Koole Kundendisplay Konfigurationsseite</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-footable/3.1.6/footable.min.js"
        integrity="sha512-aVkYzM2YOmzQjeGEWEU35q7PkozW0vYwEXYi0Ko06oVC4NdNzALflDEyqMB5/wB4wH50DmizI1nLDxBE6swF3g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/jquery-footable/3.1.6/footable.bootstrap.min.css"
        integrity="sha512-3kAToXGLroNvC/4WUnxTIPnfsiaMlCn0blp0pl6bmR9X6ibIiBZAi9wXmvpmg1cTyd2CMrxnMxqj7D12Gn5rlw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/jquery-footable/3.1.6/footable.core.bootstrap.min.css"
        integrity="sha512-HEeKPk2NP2D6/2UW3Nn+8z7GDfHExPyRyN9rwfdj7Pg3+2bAD5pgUILN3dT9cd/RC3v3C9/RKHw13f1i1bWH7g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script>

        var jsonData = JSON.parse('[{"input1":"1", "input2":"2", "input3":"3"}, {"input1":"11", "input2":"21", "input3":"31"}, {"input1":"12", "input2":"22", "input3":"32"}]');
        
        // var jsonData = JSON.parse("%Jsondata%");


    </script>
</head>

<body>
    <div class="container border border-danger">
        <div class="col">
            <div class="mb-3">
                <label for="input1" class="form-label">Input1</label>
                <input type="text" class="form-control" id="input1" placeholder="input1">
            </div>
            <div class="mb-3">
                <label for="input2" class="form-label">Input2</label>
                <input type="text" class="form-control" id="input2" placeholder="input2">
            </div>
            <div class="mb-3">
                <label for="input2" class="form-label">Input3</label>
                <input type="text" class="form-control" id="input3" placeholder="input3">
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-primary mb-3">Save</button>
            </div>
        </div>

        <div class="col">
            <!-- Table Markup -->
            <table id="showcase-example-1" class="table" data-paging="true" data-filtering="true" data-sorting="true"
                data-editing="true" data-state="true"></table>

            <!-- Editing Modal Markup -->
            <div class="modal fade" id="editor-modal" tabindex="-1" role="dialog" aria-labelledby="editor-title">
                <style scoped>
                    /* provides a red astrix to denote required fields - this should be included in common stylesheet */
                    .form-group.required .control-label:after {
                        content: "*";
                        color: red;
                        margin-left: 4px;
                    }
                </style>
                <div class="modal-dialog" role="document">
                    <form class="modal-content form-horizontal" id="editor">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                    aria-hidden="true">Ã—</span></button>
                            <h4 class="modal-title" id="editor-title">Add Row</h4>
                        </div>
                        <div class="modal-body">
                            <input type="number" id="id" name="id" class="hidden" />
                            <div class="form-group required">
                                <label for="firstName" class="col-sm-3 control-label">First Name</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="firstName" name="firstName"
                                        placeholder="First Name" required>
                                </div>
                            </div>
                            <div class="form-group required">
                                <label for="lastName" class="col-sm-3 control-label">Last Name</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="lastName" name="lastName"
                                        placeholder="Last Name" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="jobTitle" class="col-sm-3 control-label">Job Title</label>
                                <div class="col-sm-9">
                                    <input type="text" class="form-control" id="jobTitle" name="jobTitle"
                                        placeholder="Job Title">
                                </div>
                            </div>
                            <div class="form-group required">
                                <label for="startedOn" class="col-sm-3 control-label">Started On</label>
                                <div class="col-sm-9">
                                    <input type="date" class="form-control" id="startedOn" name="startedOn"
                                        placeholder="Started On" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="dob" class="col-sm-3 control-label">Date of Birth</label>
                                <div class="col-sm-9">
                                    <input type="date" class="form-control" id="dob" name="dob"
                                        placeholder="Date of Birth">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="status" class="col-sm-3 control-label">Status</label>
                                <div class="col-sm-9">
                                    <select class="form-control" id="status" name="status">
                                        <option value="Active">Active</option>
                                        <option value="Disabled">Disabled</option>
                                        <option value="Suspended">Suspended</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-primary">Save changes</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>

            <script>
                jQuery(function ($) {
                    var $modal = $('#editor-modal'),
                        $editor = $('#editor'),
                        $editorTitle = $('#editor-title'),
                        ft = FooTable.init('#showcase-example-1', {
                            columns:  $.get("https://raw.githubusercontent.com/eddieosi/esp_loader/main/columns.json"),
                            rows: jsonData,
                            editing: {
                                addRow: function () {
                                    $modal.removeData('row');
                                    $editor[0].reset();
                                    $editorTitle.text('Add a new row');
                                    $modal.modal('show');
                                },
                                editRow: function (row) {
                                    var values = row.val();
                                    $editor.find('#id').val(values.id);
                                    $editor.find('#firstName').val(values.firstName);
                                    $editor.find('#lastName').val(values.lastName);
                                    $editor.find('#jobTitle').val(values.jobTitle);
                                    $editor.find('#status').val(values.status);
                                    $editor.find('#startedOn').val(values.started.format('YYYY-MM-DD'));
                                    $editor.find('#dob').val(values.dob.format('YYYY-MM-DD'));
                                    $modal.data('row', row);
                                    $editorTitle.text('Edit row #' + values.id);
                                    $modal.modal('show');
                                },
                                deleteRow: function (row) {
                                    if (confirm('Are you sure you want to delete the row?')) {
                                        row.delete();
                                    }
                                }
                            }
                        }),
                        uid = 10001;

                    $editor.on('submit', function (e) {
                        if (this.checkValidity && !this.checkValidity()) return;
                        e.preventDefault();
                        var row = $modal.data('row'),
                            values = {
                                id: $editor.find('#id').val(),
                                firstName: $editor.find('#firstName').val(),
                                lastName: $editor.find('#lastName').val(),
                                jobTitle: $editor.find('#jobTitle').val(),
                                started: moment($editor.find('#startedOn').val(), 'YYYY-MM-DD'),
                                dob: moment($editor.find('#dob').val(), 'YYYY-MM-DD'),
                                status: $editor.find('#status option:selected').val()
                            };

                        if (row instanceof FooTable.Row) {
                            row.val(values);
                        } else {
                            values.id = uid++;
                            ft.rows.add(values);
                        }
                        $modal.modal('hide');
                    });
                });
            </script>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>

</html>